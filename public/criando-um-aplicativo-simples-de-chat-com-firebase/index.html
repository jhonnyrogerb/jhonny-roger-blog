<!DOCTYPE html>
<html>
<head>
	<title>Sejedev - "Seje" dev, não seja sobrinho!</title>
	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

	<link rel="stylesheet" type="text/css" href="http://localhost/jhonny-roger/public/css/style.min.css?1500245848">
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<script>
	  (adsbygoogle = window.adsbygoogle || []).push({
	    google_ad_client: "ca-pub-9403183739906461",
	    enable_page_level_ads: true
	  });
	</script>
</head>
<body>
	<header id="sd-header">
		<a href="http://localhost/jhonny-roger/public/" id="sd-logo">Sejedev</a>
		<nav id="sd-nav-menu">
			<ul>
				<li><a href="http://localhost/jhonny-roger/public/categories/nodejs">Artigos</a></li>
				<li><a href="http://localhost/jhonny-roger/public/categories/jquery">Noticias</a></li>
				<li><a href="http://localhost/jhonny-roger/public/categories/jquery">Projetos</a></li>
				<li><a href="http://localhost/jhonny-roger/public/categories/jquery">Colabore</a></li>
			</ul>
		</nav>
		<form action="#" id="sd-search-form">
			<input type="search" name="search" placeholder="Faça a sua busca!">
		</form>
	</header>
<section id="sd-main-post">
    
    <h1>
        <a href="/jhonny-roger/public/frontend-week/">
            Front-end Week
        </a>
    </h1>
    <p class="sd-main-excerpt">
         Uma overdose de eventos e palestras sobre front-end em uma semana. 
    </p>
    <p class="sd-main-author">
        por <a href="/jhonny-roger/public/author/diego-eis">Diego Eis"</a>27/06/2017
    </p>
    
</section>



<div class="tb-post">

  <section class="tb-post-content">
    <article class="tb-post-article">
      

<p><a href="https://www.firebase.com/">Firebase</a> é uma plataforma para desenvolvimento de aplicativos baseados em armazenamento e sincronização de dados em tempo real utilizando apenas código <em>client-side</em>. Utilizando o Firebase você será capaz de armazenar e sincronizar os dados da aplicação de uma maneira extremamente simples e direta, o que é extremamente conveniente quando pensamos em aplicações como chats e jogos.</p>

<p><strong>Firebase</strong> oferece integração com várias plataformas como <strong>Angular</strong>, <strong>Ember</strong> e <strong>Node.js</strong>, mas você pode simplesmente incluir a biblioteca javascript em uma página html simples e começar a desenvolver uma aplicação com transmissão de dados em tempo real.</p>

<h2 id="primeiros-passos">Primeiros passos</h2>

<p>Para iniciar uma aplicação web com Firebase partimos de uma página html simples e importamos a biblioteca JavaScript do <strong>Firebase</strong>:</p>

<pre class="lang-html">&lt;html&gt;
  &lt;head&gt;
    &lt;script src=‘https://cdn.firebase.com/js/client/1.0.17/firebase.js'&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>

<p>Antes de continuar com o tutorial, acesse a página do <strong>Firebase</strong> e crie uma conta gratuita. Após acessar sua conta, escolha a opção de criar um novo aplicativo, e em seguida copie a <em>url</em> do novo aplicativo. A <em>url</em> tem o formato <em>seu-app.firebaseIO.com</em>.</p>

<p>Em seguida insira dentro da tag <code>body</code> uma tag <code>script</code> e insira o código para criar uma referência à sua aplicação da seguinte maneira:</p>

<pre class="lang-html">&lt;html&gt;
  &lt;head&gt;
    &lt;script src='https://cdn.firebase.com/js/client/1.0.17/firebase.js'&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script&gt;
      var APP = new Firebase('https://seu-app.firebaseIO.com/');   
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>

<p>Pronto, seu aplicativo já está conectado com o <strong>Firebase</strong>, mas seu chat ainda não está pronto para ser o próximo sucesso da internet.</p>

<h2 id="enviando-uma-mensagem">Enviando uma mensagem</h2>

<p>Na sequência, para possibilitar que o usuário envie uma mensagem, vamos adicionar um campo para que seja escrita as mensagens e um para o nome do usuário e vamos enviar para o servidor sempre que o usuário pressionar enter. Para obter o conteúdo da mensagem assim como o evento do envio, vamos utilizar um pouco de <a href="http://jquery.com/" rel="noreferrer">jQuery</a>, portanto não esqueça de incluí-lo em sua página.</p>

<p>Até agora temos a seguinte estrutura:</p>

<pre class="lang-html">&lt;html&gt;
&lt;head&gt;
  &lt;script src='https://cdn.firebase.com/js/client/1.0.17/firebase.js'&gt;&lt;/script&gt;
  &lt;script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;input type="text" id="nomeusuario" placeholder="Seu nome..."&gt;
  &lt;input type="text" id="mensagem" placeholder="Sua mensagem..."&gt;
  &lt;script&gt;
    var APP = new Firebase('https://seu-app.firebaseIO.com/');
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>Precisamos então capturar o evento do pressionar da tecla enter e em seguida chamar o método push da nossa referência à nossa aplicação <strong>Firebase</strong> para enviar um objeto ao servidor contendo os dados da mensagem. Para fazer isso incluímos o seguinte código na página:</p>

<pre class="lang-javascript">$('#mensagem').keypress(function (e) {
  if (e.keyCode == 13) {

    var msg = $('#mensagem').val();
    var usr = $('#nomeusuario').val();
    APP.push({ nomeusuario: usr, mensagem: msg });

    $('#mensagem').val('');
  }
});
</pre>

<p>Obtendo o seguinte resultado:</p>

<pre class="lang-html">&lt;html&gt;
&lt;head&gt;
  &lt;script src='https://cdn.firebase.com/js/client/1.0.17/firebase.js'&gt;&lt;/script&gt;
  &lt;script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;input type="text" id="nomeusuario" placeholder="Seu nome..."&gt;
  &lt;input type="text" id="mensagem" placeholder="Sua mensagem..."&gt;
  &lt;script&gt;
    var APP = new Firebase('https://seu-app.firebaseIO.com/');

    $('#mensagem').keypress(function (e) {
      if (e.keyCode == 13) {

        var msg = $('#mensagem').val();
        var usr = $('#nomeusuario').val();
        APP.push({ nomeusuario: usr, mensagem: msg });

        $('#mensagem').val('');
      }
    });
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>Com o que foi construído até agora, já conseguimos que as mensagens cheguem até o servidor. Para conferir este resultado basta acessar o <em>Dashboard</em> da sua conta no <strong>Firebase</strong> e selecionar seu app.</p>

<p>Nessa página é possível ver uma representação gráfica da fila de objetos que está sendo criada quando você envia as mensagens, como na imagem a seguir:</p>

<p><img class="aligncenter size-full wp-image-43526" src="http://tableless.com.br/uploads/2014/07/Captura-de-Tela-2014-07-16-às-00.52.241.png" alt="Captura de Tela 2014-07-16 às 00.52.24" srcset="uploads/2014/07/Captura-de-Tela-2014-07-16-às-00.52.241.png 1344w, uploads/2014/07/Captura-de-Tela-2014-07-16-às-00.52.241-198x139.png 198w, uploads/2014/07/Captura-de-Tela-2014-07-16-às-00.52.241-400x279.png 400w" sizes="(max-width: 1344px) 100vw, 1344px" /></p>

<p>Entretanto, ainda precisamos mostrar essas mensagens para todos usuários conectados ao chat em seus navegadores.</p>

<h2 id="recebendo-as-mensagens">Recebendo as mensagens</h2>

<p>Garantir que todos usuários do seu chat recebam todas as mensagens é muito simples, basta ouvir ao evento <code>child_added</code> da biblioteca do <strong>Firebase</strong>. Este evento evento é disparado sempre que uma nova mensagem é enviada ao servidor e sua função de <em>callback</em> recebe como parâmetro o objeto que contém as informações dessa mensagem. Escrevemos o seguinte código para tal operação:</p>

<pre class="lang-javascript">APP.on('child_added', function(snap) {
  var novamensagem = snap.val(); //Nova mensagem recebida.
});
</pre>

<p>Em seguida criamos uma <code>div</code> para carregar as mensagens na página e criamos uma função para adicionar as mensagens recebidas dentro dessa <code>div</code>. Com o auxílio do <strong>jQuery</strong> podemos escrever o seguinte:</p>

<pre class="lang-javascript">function carregaMensagem(nome, mensagem) {
  $('&lt;div/&gt;').text(mensagem)
    .prepend($('&lt;strong/&gt;').text(nome + ': '))
    .appendTo($('#mensagens'));

  $('#mensagens')[0].scrollTop = $('#mensagens')[0].scrollHeight;
};
</pre>

<p>Agora podemos utilizar essa função para carregar a mensagem na página utilizando o <em>handler</em> que criamos para o evento <code>child_added</code> da seguinte maneira:</p>

<pre class="lang-javascript">APP.on('child_added', function(snap) {
  var novamensagem = snap.val(); //Nova mensagem recebida.
  carregaMensagem(novamensagem.nomeusuario, novamensagem.mensagem);
});
</pre>

<p>Com isso, temos o seguinte resultado final:</p>

<pre class="lang-html">&lt;html&gt;
&lt;head&gt;
  &lt;script src='https://cdn.firebase.com/js/client/1.0.17/firebase.js'&gt;&lt;/script&gt;
  &lt;script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id='mensagens'&gt;&lt;/div&gt;
  &lt;input type="text" id="nomeusuario" placeholder="Seu nome..."&gt;
  &lt;input type="text" id="mensagem" placeholder="Sua mensagem..."&gt;
  &lt;script&gt;
    var APP = new Firebase('https://seu-app.firebaseIO.com/');

    $('#mensagem').keypress(function (e) {
      if (e.keyCode == 13) {

        var msg = $('#mensagem').val();
        var usr = $('#nomeusuario').val();
        APP.push({ nomeusuario: usr, mensagem: msg });

        $('#mensagem').val('');
      }
    });

    APP.on('child_added', function(snap) {
      var novamensagem = snap.val(); //Nova mensagem recebida.
      carregaMensagem(novamensagem.nomeusuario, novamensagem.mensagem);
    });

    function carregaMensagem(nome, mensagem) {
      $('&lt;div/&gt;').text(mensagem)
        .prepend($('&lt;strong/&gt;').text(nome + ': '))
        .appendTo($('#mensagens'));

      $('#mensagens')[0].scrollTop = $('#mensagens')[0].scrollHeight;
    };
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>E é isso, seu chat está pronto!</p>

<p>Caso não esteja funcionando como previsto, confira se seu app foi criado corretamente no <strong>Firebase</strong> e sua <em>url</em> foi inserida corretamente no seu código, e também se o <strong>jQuery</strong> foi importado na sua página.</p>

<p>Este é apenas um pequeno exemplo de aplicação do <strong>Firebase</strong>, então não deixe de visitar a <a href="https://www.firebase.com/docs/" rel="noreferrer">documentação</a> para descobrir outros recursos e informações sobre essa plataforma, assim como outros exemplos de aplicações.</p>

    </article>

    <div class="tb-related-posts">
      <h3>Leia mais:</h3>
      <ul>
        
        <li class="tb-related-post">
          <a href="/jhonny-roger/public/indo-alem-no-react-native//?utm_source=tablelessRelatedLin">Indo além no Mundo React-Native</a><br />
        </li>

        
        <li class="tb-related-post">
          <a href="/jhonny-roger/public/velocidade-tableless-estatico//?utm_source=tablelessRelatedLin">Performance do Tableless estático</a><br />
        </li>

        
        <li class="tb-related-post">
          <a href="/jhonny-roger/public/seu-primeiro-bot-para-o-telegram//?utm_source=tablelessRelatedLin">Seu primeiro bot para o Telegram</a><br />
        </li>

        
      </ul>
    </div>

  </section>
</div>

<footer id="sd-footer">
</footer>

<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<script type="text/javascript" src="http://localhost/jhonny-roger/public/js/main.js?1500245848"></script>