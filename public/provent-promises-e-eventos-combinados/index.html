<!DOCTYPE html>
<html>
<head>
	<title>Sejedev - "Seje" dev, não seja sobrinho!</title>
	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

	<link rel="stylesheet" type="text/css" href="http://localhost/jhonny-roger/public/css/style.min.css?1500245842">
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<script>
	  (adsbygoogle = window.adsbygoogle || []).push({
	    google_ad_client: "ca-pub-9403183739906461",
	    enable_page_level_ads: true
	  });
	</script>
</head>
<body>
	<header id="sd-header">
		<a href="http://localhost/jhonny-roger/public/" id="sd-logo">Sejedev</a>
		<nav id="sd-nav-menu">
			<ul>
				<li><a href="http://localhost/jhonny-roger/public/categories/nodejs">Artigos</a></li>
				<li><a href="http://localhost/jhonny-roger/public/categories/jquery">Noticias</a></li>
				<li><a href="http://localhost/jhonny-roger/public/categories/jquery">Projetos</a></li>
				<li><a href="http://localhost/jhonny-roger/public/categories/jquery">Colabore</a></li>
			</ul>
		</nav>
		<form action="#" id="sd-search-form">
			<input type="search" name="search" placeholder="Faça a sua busca!">
		</form>
	</header>
<section id="sd-main-post">
    
    <h1>
        <a href="/jhonny-roger/public/frontend-week/">
            Front-end Week
        </a>
    </h1>
    <p class="sd-main-excerpt">
         Uma overdose de eventos e palestras sobre front-end em uma semana. 
    </p>
    <p class="sd-main-author">
        por <a href="/jhonny-roger/public/author/diego-eis">Diego Eis"</a>27/06/2017
    </p>
    
</section>



<div class="tb-post">

  <section class="tb-post-content">
    <article class="tb-post-article">
      <p>Hoje, quando não estamos usando jQuery para lidar com eventos no DOM, nós presenciamos muito este trecho de código:</p>

<pre class="lang-javascript">document.querySelector('a').addEventListener('click', function() {
// amazing stuff
});
</pre>

<p>Embora funcione muito bem, nos trás alguns limites&#8230;</p>

<p>Dentro do parâmetro de callback, é onde você define toda a sua lógica&#8230; Não tem uma maneira simples de adicionar mais callbacks dentro daquele evento de maneira dinâmica, sem que você salve algum tipo de estado dentro daquele callback&#8230; por exemplo:</p>

<pre class="lang-javascript">document.querySelector('a').addEventListener('click', function() {
  if(condition) {
    doSomething();
  } else {
    doSomethingElse();
  }

  // code
});
</pre>

<p>E se você usar o mesmo evento deste botão em algum módulo que está em outro arquivo? Provavelmente outro evento será adicionado a aquele mesmo botão.</p>

<p>Isso não parece ser muito prático nem escalável, e foi com esse problema que eu decidi criar um wrapper para lidar com eventos no DOM chamado <em>Provent</em>.</p>

<p><em>Provent</em> lida com eventos no DOM, mas com uma sintaxe parecida com a de promises, e com a mesma flexibilidade de encadear callbacks e mover a promise para qualquer lugar do seu código.</p>

<p>Então vamos ver como ficaria o primeiro exemplo de código, usando <em>Provent</em>:</p>

<pre class="lang-javascript">var linkClick = Provent(document.querySelector('a'), 'click');
</pre>

<p>Até ai tudo bem, um evento foi adicionado ao elemento correspondente a querySelector, mas nenhum callback é chamado, podemos fazer isso usando o famoso <em>then</em>.</p>

<pre class="lang-javascript">linkClick.then(function(event) {
  console.log(this);
  console.log(event);
});
</pre>

<p>Os valores dentro desse callback são os mesmos que o callback default de um <em>addEventListener</em>, o primeiro argumento aponta para o evento, e o <em>this</em> aponta para o elemento que foi clicado.</p>

<p>Até ai é a mesma coisa que usar addEventListener, mas temos algumas flexibilidades a mais:</p>

<pre class="lang-javascript">linkClick.then(function(event) {
  // some code
});

linkClick.then(function(event) {
  // more code here
});
</pre>

<p>Adicionamos mais um callback no mesmo evento de <em>click</em>, sem precisar adicionar mais um evento no elemento, legal né?!</p>

<p>Podemos encadear varios <em>then</em>, e passar o retorno de cada callback para o próximo da fila, assim:</p>

<pre class="lang-javascript">linkClick.then(function(param) {
  console.log(param); // event
  return true
}).then(function(param) {
  console.log(param); // true
  return {};
}).then(function(param) {
  console.log(param); // {}
});
</pre>

<p>E você também consegue cancelar esses callbacks a qualquer momento usando o método <em>reject</em>:</p>

<pre class="lang-javascript">linkClick.then(function(param) {
  console.log(param); // event
  return true
});

linkClick.reject();
</pre>

<p>Executando o <em>reject</em> sem passar nenhum parâmetro, você cancela todos os callbacks que foram adicionados aos <em>then</em>, e também remove o eventListener do botão, prevenindo assim qualquer forma de memory leak indesejado.</p>

<p>O <em>reject</em> também pode ser usado passando um ID, no caso de você definir um callback do <em>then</em> usando o mesmo ID, da seguinte maneira:</p>

<pre class="lang-javascript">linkClick.then(function(param) {
  // code
}).then('123', function(param) { // essa linha mudou
  // code
}).then(function(param) {
  // code
});

linkClick.reject('123');
</pre>

<p>Nesse ultimo exemplo, todos os callbacks menos o que contem o id <em>123</em> vai ser executado, e o evento no elemento também não será removido.</p>

<p>Resumindo.</p>

<p>Provent é uma lib que foi criada para facilitar a manipulação de eventos no DOM, diminuindo a complexidade de adicionar e remover callbacks a qualquer momento.</p>

<p>Você pode instalar o <em>Provent</em> usando _npm _ou <em>bower</em>:</p>

<pre>npm install provent
bower install provent
</pre>

<p>A documentação está no repositório do Github: <a href="http://github.com/mauriciosoares/provent">http://github.com/mauriciosoares/provent</a></p>

<p>Deixem seu feedback e sugestões.</p>

    </article>

    <div class="tb-related-posts">
      <h3>Leia mais:</h3>
      <ul>
        
        <li class="tb-related-post">
          <a href="/jhonny-roger/public/indo-alem-no-react-native//?utm_source=tablelessRelatedLin">Indo além no Mundo React-Native</a><br />
        </li>

        
        <li class="tb-related-post">
          <a href="/jhonny-roger/public/seu-primeiro-bot-para-o-telegram//?utm_source=tablelessRelatedLin">Seu primeiro bot para o Telegram</a><br />
        </li>

        
        <li class="tb-related-post">
          <a href="/jhonny-roger/public/paginas_acessiveis_hatemile//?utm_source=tablelessRelatedLin">Páginas acessíveis com o HaTeMiLe</a><br />
        </li>

        
      </ul>
    </div>

  </section>
</div>

<footer id="sd-footer">
</footer>

<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<script type="text/javascript" src="http://localhost/jhonny-roger/public/js/main.js?1500245843"></script>